import edu.wpi.first.gradlerio.GradleRIOPlugin

plugins {
    id 'java'
    id "edu.wpi.first.GradleRIO" version "2019.2.1"
}

def ROBOT_MAIN_CLASS = "com.amhsrobotics.tko2019.Robot"
def includeDesktopSupport = false

group 'com.amhsrobotics'
version '0.2.0'

sourceCompatibility = 1.11

repositories {
    mavenCentral()
    maven {
        url 'http://devsite.ctr-electronics.com/maven/release/'
    }
}

dependencies {
    //noinspection GroovyAssignabilityCheck
    compile wpi.deps.wpilib()
    //noinspection GroovyAssignabilityCheck
    compile wpi.deps.vendor.java()
    //noinspection GroovyAssignabilityCheck
    nativeZip wpi.deps.vendor.jni(wpi.platforms.roborio)
    //noinspection GroovyAssignabilityCheck
    nativeDesktopZip wpi.deps.vendor.jni(wpi.platforms.desktop)

    implementation 'com.ctre.phoenix:api-java:5.12.1'
    implementation 'com.ctre.phoenix:wpiapi-java:5.12.1'
    implementation 'com.ctre.phoenix:cci:5.12.1'
}

deploy {
    targets {
        roboRIO("roborio") {
            team = 1351
        }
    }
    artifacts {
        frcJavaArtifact('frcJava') {
            //noinspection GroovyAssignabilityCheck
            targets << "roborio"
        }
        fileTreeArtifact('frcStaticFileDeploy') {
            files = fileTree(dir: 'src/main/resources')
            //noinspection GroovyAssignabilityCheck
            targets << "roborio"
            directory = '/home/lvuser/deploy'
        }
    }
}

jar {
    from {
        configurations.compile.collect {
            if (it.isDirectory()) {
                it
            } else {
                zipTree(it)
            }
        }
    }
    //noinspection GroovyAssignabilityCheck
    manifest GradleRIOPlugin.javaManifest(ROBOT_MAIN_CLASS)
}
